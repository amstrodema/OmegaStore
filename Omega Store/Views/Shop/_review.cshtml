@model Store.Model.ViewModel.MainVM
@using Omega_Store.Services;
@inject LoginValidator loginValidator


    <div class="row">
        <div class="col-md-6">
            <div class=" mb-4">
                @* <img src="img/user.jpg" alt="Image" class="img-fluid mr-3 mt-1" style="width: 45px;"> *@
                @foreach (var review in Model.Reviews)
            {
                <div class="media-body">
                    <h6 class="capitalize">@review.Name<small> - <i>@review.DateCreated.ToString("d")</i></small></h6>
                    <div class="text-primary mb-2">
                        @for (int i = 1; i <= 5; i++)
                        {
                            if (i <= review.Rating)
                            {
                                <i class="fas fa-star"></i>
                            }
                            else
                            {
                                <i class="far fa-star"></i>
                            }
                        }
                    </div>
                    <p>@review.Message</p>
                </div>
                <hr />
            }
            @if(Model.Reviews.Count() < 1)
            {
                <div class="bold">No Review For This Item Yet</div>
            }
        </div>
        </div>
        <div class="col-md-6">
            <h4 class="mb-4">Leave a review</h4>
            <small>Your email address will not be published. Required fields are marked *</small>
            <div class="d-flex my-3">
                <p class="mb-0 mr-2">Your Rating * :</p>
                <div class="text-primary" id="ratingHolder">
                    <i class="far fa-star" onclick="ProcessRating(1)"></i>
                    <i class="far fa-star" onclick="ProcessRating(2)"></i>
                    <i class="far fa-star" onclick="ProcessRating(3)"></i>
                    @* <i class="fas fa-star-half-alt"></i> *@
                    <i class="far fa-star" onclick="ProcessRating(4)"></i>
                    <i class="far fa-star" onclick="ProcessRating(5)"></i>
                </div>
            </div>
            @if (loginValidator.IsLoggedIn())
            {
             
                    <input id="ratingValue" hidden />
                    <div class="form-group">
                        <label for="message">Your Review *</label>
                        <textarea id="message" cols="30" rows="5" class="form-control" required></textarea>
                    </div>
                    <div class="form-group mb-0">
                        <input type="button" onclick="ValidateReview()" value="Leave Your Review" class="btn btn-primary px-3">
                    </div>
              
            }
            else
            {
             
                    <input id="ratingValue" hidden />
                    <div class="form-group">
                        <label for="message">Your Review *</label>
                        <textarea id="message" cols="30" rows="5" class="form-control" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="name">Your Name *</label>
                        <input type="text" class="form-control" id="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Your Email *</label>
                        <input type="email" class="form-control" id="email" required>
                    </div>
                    <div class="form-group mb-0">
                        <input type="button" onclick="ValidateReview()" value="Leave Your Review" class="btn btn-primary px-3">
                    </div>
             
            }

        </div>
    </div>
  